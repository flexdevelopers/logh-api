<div class="alert alert-success" ng-show="leagueData.start_week_complete && aliveTeams.length == 0">Oops. All of the teams are now dead. Check the 'Dead Teams' tab to see the final results.</div>
<div class="header-row row">
  <div class="col-sm-7 col-md-7">
    <h3 class="league-name">
      <i class="fa fa-times" title="Closed league" ng-show="!leagueData.open"></i>
      <i class="fa fa-lock" title="Private league" ng-show="leagueData.open && !leagueData.public"></i>
      <i class="fa fa-unlock" title="Public league" ng-show="leagueData.open && leagueData.public"></i>
      {{leagueData.name}} <small class="edit-league"><a ng-show="isCommish(leagueData) && !leagueData.start_week_complete" ng-click="editLeague(leagueData)">[ edit ]</a></small> <br>
      <small>{{starts(leagueData)}}</small>
      <small class="closed-text" ng-show="!leagueData.open">CLOSED TO NEW TEAMS</small>
    </h3>
  </div>
  <div class="col-sm-5 col-md-5">
    <button type="button" class="join-btn btn btn-primary btn-sm" ng-show="!leagueData.start_week_complete" ng-click="joinLeague(leagueData)">Join</button>
    <button type="button" class="invite-btn btn btn-primary btn-sm" ng-show="!leagueData.start_week_complete && (leagueData.public || isCommish(leagueData))" ng-click="invite(leagueData.id)">Invite</button>
    <button type="button" class="request-invite-btn btn btn-primary btn-sm" ng-show="!leagueData.start_week_complete && !leagueData.public && !isCommish(leagueData)" ng-click="requestInvite(leagueData)">Request Invite</button>
    <div class="btn-group league-actions" ng-show="hasTeamInLeague() || isCommish(leagueData)" dropdown is-open="commish.isopen">
      <button type="button" class="league-actions-btn btn btn-default btn-sm dropdown-toggle">
        <strong>Actions</strong> <span class="caret"></span>
      </button>
      <ul class="dropdown-menu league-actions-menu" role="menu">
        <li ng-show="!isCommish(leagueData)"><a ng-click="contactCommish(leagueData)">Contact the commish</a></li>
        <li><a ng-click="reportAbuse()">Report abuse</a></li>
        <li><a ng-click="reportAbuse()">Report a bug</a></li>
        <li ng-show="isCommish(leagueData)" class="divider"></li>
        <li><a ng-show="isCommish(leagueData) && !leagueData.start_week_complete" ng-click="editLeague(leagueData)">Edit league</a></li>
        <li><a ng-show="isCommish(leagueData)" ng-click="updateMessage(leagueData)">Edit league message</a></li>
      </ul>
    </div>
  </div>
</div>
<div class="league-message well well-sm" ng-show="!leagueData.start_week_complete || hasTeamInLeague() || isCommish(leagueData)"><i class="fa fa-comment fa-fw" title="Message for the league"></i> <strong>The commish says:</strong> <p class="league-message-text" ng-show="!leagueData.message || leagueData.message.length == 0">Nothing</p><p class="league-message-text" ng-show="leagueData.message.length > 0" ng-bind-html="leagueData.message | linky:'_blank'"></p> <a ng-show="isCommish(leagueData)" ng-click="updateMessage(leagueData)">[ edit ]</a><a ng-show="!isCommish(leagueData) && hasTeamInLeague()" ng-click="contactCommish(leagueData)">[ contact commish ]</a></div>
<hr>
<div class="row">
  <div class="col-sm-7 col-md-7">
    <h4>Teams ({{leagueData.team_count}}) <small><a ng-show="!leagueData.start_week_complete && !isCommish(leagueData)" ng-click="joinLeague(leagueData)">[ join up to {{leagueData.max_teams_per_user}} times ]</a> <a ng-show="isCommish(leagueData) && teamOptions.inactive == true" ng-click="teamOptions.inactive = false">[ hide deactivated<span class="teams"> teams</span> ]</a><a ng-show="isCommish(leagueData) && teamOptions.inactive == false" ng-click="teamOptions.inactive = true">[ show deactivated<span class="teams"> teams</span> ]</a></small></h4>
  </div>
  <div class="col-sm-5 col-md-5">
    <div class="input-group custom-search-form">
      <input type="text" class="form-control" placeholder="Filter by team name or coach..." ng-model="teamQuery">
      <span class="input-group-btn">
          <button class="btn btn-default" type="button">
            <span class="glyphicon glyphicon-search"></span>
          </button>
      </span>
    </div>
  </div>
</div>
<hr>
<div class="league-container">
  <tabset justified="true">
    <tab select="resetSearch()">
      <tab-heading>
        <i class="fa fa-thumbs-up fa-fw" title="Alive teams"></i> Alive Teams
      </tab-heading>
      <div class="alive-teams list-group">
        <a ng-repeat="team in aliveTeams | activeTeamFilter:teamOptions | filter:search:strict | offsetFilter:(currentTeamPage-1)*teamsPerPage | limitTo:teamsPerPage" ng-click="showTeam(team)" class="list-group-item">
          <div class="row">
            <div class="league-name col-sm-6 col-md-6 team-name" ng-class="{'inactive': !team.active}">
              <i class="fa fa-times fa-fw" title="Deactivated Team" ng-show="!team.active"></i>
              <i class="fa fa-user fa-fw" ng-show="team.active && isCoach(team)" title="My team"></i> {{team.name}}<br><span class="coach-name">Coach: {{coachName(team)}}</span></div>
            <div class="col-sm-6 col-md-6">
              <span class="current-pick" ng-class="{'no-pick': hasNoPick(team)}" ng-show="team.active">Current Loser: {{team.last_pick_squad_name}}</span>
              <span class="inactive-team" ng-show="!team.active">Deactivated by the commish</span>
              <span class="badge">{{team.correct_picks_count}} correct</span>
            </div>
          </div>
        </a>
      </div>
      <div>
        <div class="alert alert-info" ng-show="(aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length == 0">
          No teams found
        </div>
        <div class="alive-teams-pagination" ng-show="aliveTeams.length > teamsPerPage && (aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length > 0">
          <pagination boundary-links="true" max-size="4" total-items="(aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length" items-per-page="teamsPerPage" ng-model="currentTeamPage" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        </div>
      </div>
      <div style="clear: both;"></div>
    </tab>
    <tab select="resetSearch()">
      <tab-heading>
        <i class="fa fa-thumbs-down fa-fw" title="Dead teams"></i> Dead Teams
      </tab-heading>
      <div class="dead-teams list-group">
        <a ng-repeat="team in deadTeams | activeTeamFilter:teamOptions | filter:search:strict | offsetFilter:(currentTeamPage-1)*teamsPerPage | limitTo:teamsPerPage" ng-click="showTeam(team)" class="list-group-item">
          <div class="row">
            <div class="league-name col-sm-4 col-md-4 team-name" ng-class="{'inactive': !team.active}">
              <i class="fa fa-user fa-fw" ng-show="team.active && isCoach(team)" title="My team"></i>
              <i class="fa fa-times fa-fw" title="Deactivated Team" ng-show="!team.active"></i> {{team.name}}<br><span class="coach-name">Coach: {{coachName(team)}}</span></div>
            <div class="col-sm-8 col-md-8">
              <span class="current-pick no-pick" ng-show="team.active">Last Loser: {{team.last_pick_squad_name}}</span>
              <span class="inactive-team" ng-show="!team.active">Deactivated by the commish</span>
              <span class="badge">{{team.correct_picks_count}} correct</span>
            </div>
          </div>
        </a>
      </div>
      <div>
        <div class="alert alert-info" ng-show="(deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length == 0">
          No teams found
        </div>
        <div class="dead-teams-pagination" ng-show="deadTeams.length > teamsPerPage && (deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length > 0">
          <pagination boundary-links="true" max-size="4" total-items="(deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length" items-per-page="teamsPerPage" ng-model="currentTeamPage" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        </div>
      </div>
      <div style="clear: both;"></div>
    </tab>
  </tabset>
</div>
