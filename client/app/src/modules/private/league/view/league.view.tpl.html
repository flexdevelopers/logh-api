<div class="header-row row">
  <div class="col-sm-8 col-md-8">
    <h3 class="league-name">
      <i class="glyphicon glyphicon-remove" title="Closed league" ng-show="leagueData.closed"></i>
      <i class="glyphicon icon-lock" title="Private league" ng-show="!leagueData.closed && !leagueData.public"></i>
      <i class="glyphicon icon-unlock" title="Public league" ng-show="!leagueData.closed && leagueData.public"></i>
      {{leagueData.name}}
      <small>{{starts(leagueData)}}</small>
    </h3>
  </div>
  <div class="col-sm-4 col-md-4">
    <button type="button" class="join-btn btn btn-primary btn-sm" ng-show="!hasTeamInLeague() && !leagueData.started" ng-click="joinLeague(leagueData)">Join</button>
    <button type="button" class="request-invite-btn btn btn-default btn-sm" ng-show="!hasTeamInLeague() && !leagueData.started && !leagueData.public && !isCommish(leagueData)" ng-click="requestInvite(leagueData)">Request Invite</button>
    <div class="btn-group coach-actions" ng-show="hasTeamInLeague()" dropdown is-open="coach.isopen">
      <button type="button" class="coach-only-btn btn btn-primary btn-sm dropdown-toggle">
        Coach <span class="caret"></span>
      </button>
      <ul class="dropdown-menu league-coach-menu" role="menu">
        <li ng-show="!leagueData.started"><a ng-click="joinLeague(leagueData)">Join again ({{leagueData.max_teams_per_user}} times max)</a></li>
        <li ng-show="!leagueData.started" class="divider"></li>
        <li><a ng-click="contactCommish(leagueData)">Contact the commish</a></li>
      </ul>
    </div>
    <div class="btn-group commish-actions" ng-show="isCommish(leagueData)" dropdown is-open="commish.isopen">
      <button type="button" class="commish-only-btn btn btn-default btn-sm dropdown-toggle">
        Commish <span class="caret"></span>
      </button>
      <ul class="dropdown-menu league-commish-menu" role="menu">
        <li ng-show="!leagueData.started"><a ng-click="invite(leagueData.id)">Invite a coach to join</a></li>
        <li ng-show="!leagueData.started" class="divider"></li>
        <li><a ng-show="!leagueData.started" ng-click="editLeague(leagueData)">Edit league</a></li>
        <li><a ng-click="updateMessage(leagueData)">Update league message</a></li>
        <li ng-show="!leagueData.started && leagueData.closed"><a ng-click="openLeague(leagueData)">Open league to new teams</a></li>
        <li ng-show="!leagueData.started && !leagueData.closed"><a ng-click="closeLeague(leagueData)">Close league to new teams</a></li>
      </ul>
    </div>
  </div>
</div>
<div class="league-message well well-sm"><strong>From the commish:</strong> <em>{{message(leagueData)}}</em> <a ng-show="isCommish(leagueData)" ng-click="updateMessage(leagueData)">[ Update ]</a></div>
<h4>Teams ({{leagueData.team_count}})</h4>
<hr>
<div class="league-container" style="clear:both;">
  <div class="input-group custom-search-form">
    <input type="text" class="form-control" placeholder="Filter by name..." ng-model="search.name">
        <span class="input-group-btn">
            <button class="btn btn-default" type="button">
              <span class="glyphicon glyphicon-search"></span>
            </button>
        </span>
  </div>
  <tabset>
    <tab select="resetSearch()">
      <tab-heading>
        <i class="glyphicon glyphicon-thumbs-up"></i> Alive Teams
      </tab-heading>
      <div class="alive-teams list-group">
        <a ng-repeat="team in aliveTeams | activeTeamFilter:teamOptions | filter:search:strict | offsetFilter:(currentTeamPage-1)*teamsPerPage | limitTo:teamsPerPage" ng-click="showTeam(team)" class="list-group-item">
          <div class="row">
            <div class="league-name col-sm-6 col-md-6"><i class="glyphicon glyphicon-user" ng-show="isCoach(team)"></i> {{team.name}} <span class="coach-name">{{coachName(team)}}</span></div>
            <div class="col-sm-6 col-md-6">
              <span class="current-pick" ng-class="{'no-pick': hasNoPick(team)}" ng-show="team.active">Current Pick: [ {{team.last_pick_squad_name}} ]</span>
              <span class="inactive-team" ng-show="!team.active">Deactivated by the commish</span>
              <span class="badge">{{team.correct_picks_count}} correct</span>
            </div>
          </div>
        </a>
      </div>
      <div>
        <div class="alert alert-info" ng-show="(aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length == 0">
          No teams found
        </div>
        <div class="alive-teams-pagination" ng-show="(aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length > 0">
          <pagination boundary-links="true" max-size="4" total-items="(aliveTeams | activeTeamFilter:teamOptions | filter:search:strict).length" items-per-page="teamsPerPage" ng-model="currentTeamPage" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        </div>
        <div class="inactive-teams-checkbox" ng-show="isCommish(leagueData) && aliveTeams.length > 0">
          <label><input type="checkbox" ng-model="teamOptions.inactive"> show deactivated teams</label>
        </div>
      </div>
      <div style="clear: both;"></div>
    </tab>
    <tab select="resetSearch()">
      <tab-heading>
        <i class="glyphicon glyphicon-thumbs-down"></i> Dead Teams
      </tab-heading>
      <div class="dead-teams list-group">
        <a ng-repeat="team in deadTeams | activeTeamFilter:teamOptions | filter:search:strict | offsetFilter:(currentTeamPage-1)*teamsPerPage | limitTo:teamsPerPage" ng-click="showTeam(team)" class="list-group-item">
          <div class="row">
            <div class="league-name col-sm-4 col-md-4"><i class="glyphicon glyphicon-user" ng-show="isCoach(team)"></i> {{team.name}} <span class="coach-name">{{coachName(team)}}</span></div>
            <div class="col-sm-8 col-md-8">
              <span class="current-pick" ng-class="{'no-pick': hasNoPick(team)}" ng-show="team.active">Last Pick: [ {{team.last_pick_squad_name}} ]</span>
              <span class="inactive-team" ng-show="!team.active">Deactivated by the commish</span>
              <span class="badge">{{team.correct_picks_count}} correct</span>
            </div>
          </div>
        </a>
      </div>
      <div>
        <div class="alert alert-info" ng-show="(deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length == 0">
          No teams found
        </div>
        <div class="dead-teams-pagination" ng-show="(deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length > 0">
          <pagination boundary-links="true" max-size="4" total-items="(deadTeams | activeTeamFilter:teamOptions | filter:search:strict).length" items-per-page="teamsPerPage" ng-model="currentTeamPage" class="pagination-md" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        </div>
        <div class="inactive-teams-checkbox" ng-show="isCommish(leagueData) && deadTeams.length > 0">
          <label><input type="checkbox" ng-model="teamOptions.inactive"> show deactivated teams</label>
        </div>
      </div>
      <div style="clear: both;"></div>
    </tab>
  </tabset>
</div>
